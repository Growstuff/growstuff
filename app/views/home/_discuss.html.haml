
/ %h2.text-center= t('.discussion')
/ .list-group
/   - Post.includes(:author).order(created_at: :desc).limit(3).each do |post|
/     - cache post do
/       = link_to post, class: 'list-group-item list-group-item-action flex-column align-items-start' do
/         .d-flex.w-100.justify-content-between
/           %h5.mb-2.h5= truncate(strip_tags(post.subject))
/           %small
/             = time_ago_in_words(post.created_at)
/             ago
/         = image_tag avatar_uri(post.author, 50), align: :right, class: 'avatar'
/         %p.mb-2
/           = truncate(strip_tags(post.body), length: 200)
/         %small
/           = post.comments_count
/           comments

%h2.font-weight-bold.mb-4.pb-2 Recent posts
.row
  - Post.includes(:author, :crop_posts, :crops).order(created_at: :desc).limit(3).each do |post|
    .col-lg-4.col-md-12.mb-4
      / Featured image
      .view
        = link_to post do
          %img.img-fluid{alt: 'post image', src: post_image_path(post), class: 'img img-cover'}/
          %a
            .mask.rgba-white-slight
      / Post title
      %h4.font-weight-bold.mb-3
        %strong
          = link_to post do
            = post.subject
      %p
        by
        = succeed "," do
          %a.font-weight-bold= post.author
      %p= post_stripped_tags(post, length: 300)
      / Category
      %h6.font-weight-bold.mb-3
        - post.crops.each do |crop|
          = crop_icon(crop)
          = crop.name.pluralize
      / = image_tag avatar_uri(post.author, 50), class: 'avatar'
      = link_to 'Read more', post, class: 'btn btn-pink btn-rounded btn-md'

%p.text-right
  = link_to "#{t('.view_all')} Â»", posts_path, class: 'btn btn-block'
